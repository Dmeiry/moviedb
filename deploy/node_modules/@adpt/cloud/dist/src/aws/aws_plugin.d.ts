import { ActionInfo, AdaptElementOrNull, FinalDomElement, QueryDomain, WidgetChange, WidgetPair, WidgetPlugin } from "@adpt/core";
import AWS from "./aws-sdk";
import { CFResourceProps } from "./CFResource";
import { CFStackPrimitiveProps } from "./CFStack";
import { Tagged } from "./plugin_utils";
export declare enum TemplateFormatVersion {
    current = "2010-09-09"
}
export declare type ResourceId = string;
export interface Resources {
    [id: string]: CFResourceProps;
}
export interface Template {
    AWSTemplateFormatVersion?: TemplateFormatVersion;
    Description?: string;
    Metadata?: any;
    Parameters?: any;
    Mappings?: any;
    Conditions?: any;
    Transform?: any;
    Resources: Resources;
    Outputs?: any;
}
interface AwsRegion {
    region: string;
    accessKeyId: string;
}
interface AwsSecret {
    awsSecretAccessKey: string;
}
declare type StackObs = AWS.CloudFormation.Stack;
export declare function getAdaptDeployId(stack: StackObs): string | undefined;
export declare function getAdaptStackId(stack: StackObs): string | undefined;
export declare function getAdaptResourceId(item: Tagged): string | undefined;
export declare function isStatusActive(status: AWS.CloudFormation.StackStatus): boolean;
export declare function isStackActive(stack: StackObs): boolean;
export declare function createTemplate(stackEl: StackElement): Template;
export declare function findStackElems(dom: AdaptElementOrNull): StackElement[];
export declare function stacksWithDeployID(stacks: StackObs[] | undefined, deployID: string): StackObs[];
/**
 * Given a CFStackPrimitiveElement, creates a representation of the stack
 * that can be given to the client to create the stack.
 */
export declare function createStackParams(el: StackElement, deployID: string): {
    StackName: string;
    TemplateBody?: string | undefined;
    TemplateURL?: string | undefined;
    Parameters: never[] | AWS.CloudFormation.Parameters;
    DisableRollback?: boolean | undefined;
    RollbackConfiguration: AWS.CloudFormation.RollbackConfiguration | {};
    TimeoutInMinutes?: number | undefined;
    NotificationARNs: never[] | AWS.CloudFormation.NotificationARNs;
    Capabilities: never[] | AWS.CloudFormation.Capabilities;
    ResourceTypes?: AWS.CloudFormation.ResourceTypes | undefined;
    RoleARN?: string | undefined;
    OnFailure?: string | undefined;
    StackPolicyBody?: string | undefined;
    StackPolicyURL?: string | undefined;
    Tags: never[] | AWS.CloudFormation.Tags;
    ClientRequestToken?: string | undefined;
    EnableTerminationProtection?: boolean | undefined;
};
export declare function computeStackChanges(change: WidgetChange<StackElement>, actual: StackObs | undefined, deployID: string): ActionInfo;
declare type AwsQueryDomain = QueryDomain<AwsRegion, AwsSecret>;
declare type StackElement = FinalDomElement<CFStackPrimitiveProps>;
declare type StackPair = WidgetPair<StackElement, StackObs>;
export declare class AwsPluginImpl extends WidgetPlugin<StackElement, StackObs, AwsQueryDomain> {
    findElems: (dom: AdaptElementOrNull) => StackElement[];
    getElemQueryDomain: (el: StackElement) => AwsQueryDomain;
    getWidgetTypeFromObs: (_obs: StackObs) => string;
    getWidgetIdFromObs: (obs: StackObs) => string;
    getWidgetTypeFromElem: (_el: StackElement) => string;
    getWidgetIdFromElem: (el: StackElement) => string;
    computeChanges: (change: WidgetChange<StackElement>, obs: StackObs | undefined) => ActionInfo;
    getObservations: (domain: AwsQueryDomain, deployID: string) => Promise<StackObs[]>;
    createWidget: (domain: AwsQueryDomain, deployID: string, resource: StackPair) => Promise<void>;
    destroyWidget: (domain: AwsQueryDomain, _deployID: string, resource: StackPair) => Promise<void>;
    modifyWidget: (domain: AwsQueryDomain, deployID: string, resource: StackPair) => Promise<void>;
    getClient(domain: AwsQueryDomain): AWS.CloudFormation;
}
export declare function createAwsPlugin(): AwsPluginImpl;
export {};
//# sourceMappingURL=aws_plugin.d.ts.map